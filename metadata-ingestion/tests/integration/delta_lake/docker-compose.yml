version: "3"
services:
  minio:
    image: minio/minio:RELEASE.2023-07-07T07-13-57Z
    container_name: "minio_test"
    environment:
      MINIO_ROOT_USER: "miniouser"
      MINIO_ROOT_PASSWORD: "miniopassword"
    ports:
      - 9000:9000  # S3 API
      - 9001:9001  # Web UI
    command: server /data --console-address ":9001"

  azurite:
    image: mcr.microsoft.com/azure-storage/azurite:3.23.0
    container_name: "azurite_test"
    ports:
      - 10000:10000
      - 10001:10001
      - 10002:10002
    command: azurite --blobHost 0.0.0.0 --queueHost 0.0.0.0 --tableHost 0.0.0.0 --loose
    healthcheck:
      test: [ "CMD", "curl", "-f", "http://localhost:10000" ]
      interval: 5s
      timeout: 5s
      retries: 3

