version = '1.0'

buildscript {
  apply from: 'gradle/scripts/repositories.gradle'

  buildscript.repositories.addAll(project.repositories)

  dependencies {
    classpath 'gradle.plugin.com.palantir:jacoco-coverage:0.3.0'
    classpath "gradle.plugin.nl.javadude.gradle.plugins:license-gradle-plugin:0.13.1"
    classpath 'org.kt3k.gradle.plugin:coveralls-gradle-plugin:1.0.2'
  }
}

configurations.all {
  exclude group: 'org.slf4j', module: 'slf4j-log4j12'
  exclude group: 'log4j'

  resolutionStrategy {
      dependencySubstitution {
          substitute module('org.slf4j:slf4j-log4j12') with module('ch.qos.logback:logback-classic:1.1.7')
          //prefer 'log4j-over-slf4j' over 'log4j'
      }
  }
}

subprojects {
  apply plugin: 'java'

  task excludegroup(type: Test) {
    useTestNG() {
      excludeGroups 'needConfig'
    }

    testLogging {
      showStandardStreams = true
    }
  }

  task buildWithWarning(type: JavaCompile, dependsOn: build) {
    compileJava.options.compilerArgs << "-Xlint:deprecation" << "-Xlint:unchecked"
  }
}

apply from: 'gradle/scripts/coverage.gradle'
apply from: 'gradle/scripts/dependency.gradle'
apply from: 'gradle/scripts/ide.gradle'
apply from: 'gradle/scripts/license.gradle'

task wrapper(type: Wrapper) {
  gradleVersion = '2.14'
}
