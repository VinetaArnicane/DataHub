fragment fullRelationshipResults on EntityRelationshipsResult {
    start
    count
    total
    relationships {
        type
        direction
        entity {
            ...relationshipFields
        }
    }
}

fragment fullRelationshipResultsOptimized on EntityRelationshipsResult {
    start
    count
    total
    relationships {
        type
        direction
        entity {
            ...relationshipFieldsOptimized
        }
    }
}

fragment leafRelationshipResults on EntityRelationshipsResult {
    start
    count
    total
    relationships {
        type
        entity {
            urn
            type
        }
    }
}

fragment relationshipFields on EntityWithRelationships {
    ...lineageNodeProperties
    ... on Dataset {
        siblings {
            isPrimary
            siblings {
                urn
                type
                ...lineageNodeProperties
            }
        }
    }
    upstream: lineage(input: { direction: UPSTREAM, start: 0, count: 100 }) {
        ...leafLineageResults
    }
    downstream: lineage(input: { direction: DOWNSTREAM, start: 0, count: 100 }) {
        ...leafLineageResults
    }
}

fragment relationshipFieldsOptimized on EntityWithRelationships {
    ...lineageNodePropertiesOptimized
    ... on Dataset {
        siblings {
            isPrimary
            siblings {
                urn
                type
                ...lineageNodePropertiesOptimized
            }
        }
    }
    upstream: lineage(input: { direction: UPSTREAM, start: 0, count: 100 }) {
        ...leafLineageResults
    }
    downstream: lineage(input: { direction: DOWNSTREAM, start: 0, count: 100 }) {
        ...leafLineageResults
    }
}